{% extends 'base.html' %}
{% block title %}{{ 'Check Payment Status' if current_language=='en' else 'Vérifier le statut du paiement' }} — {{ site_name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card p-3 p-md-4">
        <h4 class="mb-3">{{ 'Payment Status' if current_language=='en' else 'Statut du paiement' }}</h4>
        <div class="mb-2">
          <span class="badge {{ 'bg-success' if booking.status=='confirmed' else ('bg-warning' if booking.status=='pending' else 'bg-danger') }}">{{ booking.status|capitalize }}</span>
        </div>
        {% if booking.status=='confirmed' %}
          <div class="alert alert-success">{{ 'Your booking is confirmed.' if current_language=='en' else 'Votre réservation est confirmée.' }}</div>
          <a class="btn btn-primary" href="/{{ current_language }}/booking/confirmation/{{ booking.id }}">{{ 'View ticket' if current_language=='en' else 'Voir le ticket' }}</a>
        {% elif booking.status=='pending' %}
          <div class="alert alert-info">{{ 'Payment still pending. Please check your phone or try again.' if current_language=='en' else 'Paiement toujours en attente. Veuillez vérifier votre téléphone ou réessayer.' }}</div>
          <div class="d-flex gap-2">
            <a class="btn btn-primary" href="/{{ current_language }}/booking/status/{{ booking.id }}">{{ 'Refresh' if current_language=='en' else 'Rafraîchir' }}</a>
            <a class="btn btn-outline-secondary" href="/{{ current_language }}/">{{ 'Home' if current_language=='en' else 'Accueil' }}</a>
          </div>
        {% else %}
          <div class="alert alert-danger">{{ 'Payment failed or canceled. Please try again.' if current_language=='en' else 'Paiement échoué ou annulé. Veuillez réessayer.' }}</div>
          <a class="btn btn-primary" href="/{{ current_language }}/booking/payment">{{ 'Try payment again' if current_language=='en' else 'Réessayer le paiement' }}</a>
        {% endif %}
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card p-3">
        <h6 class="mb-2">{{ 'Booking' if current_language=='en' else 'Réservation' }}</h6>
        <div class="small"><strong>#{{ booking.booking_reference }}</strong></div>
        <div class="small text-secondary">{{ booking.trip.route.origin }} → {{ booking.trip.route.destination }}</div>
        <div class="small">{{ booking.trip.departure_time.strftime('%d/%m/%Y %H:%M') }}</div>
        <div class="small">{{ 'Amount' if current_language=='en' else 'Montant' }}: {{ '%.0f'|format(booking.total_amount) }} XAF</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
