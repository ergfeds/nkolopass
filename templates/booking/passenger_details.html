{% extends 'base.html' %}
{% block title %}{{ 'Passenger Details' if current_language=='en' else 'Détails des passagers' }} — {{ site_name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="mb-3">
    <h3 class="mb-1">{{ trip.route.origin }} → {{ trip.route.destination }}</h3>
    <div class="text-secondary">
      {{ 'Departure' if current_language=='en' else 'Départ' }}: {{ trip.departure_time.strftime('%d/%m/%Y %H:%M') }} ·
      {{ 'Seat price' if current_language=='en' else 'Prix par place' }}: {{ '%.0f'|format(trip.seat_price) }} XAF ·
      {{ 'Selected seats' if current_language=='en' else 'Places sélectionnées' }}: {{ selected_seats|join(', ') }}
    </div>
  </div>

  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card p-3">
        <h5 class="mb-3">{{ 'Lead passenger' if current_language=='en' else 'Passager principal' }}</h5>
        <form method="post">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">{{ 'Full name' if current_language=='en' else 'Nom complet' }}</label>
              <input type="text" class="form-control" name="name" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" name="email" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">{{ 'Phone' if current_language=='en' else 'Téléphone' }}</label>
              <input type="tel" class="form-control" name="phone" placeholder="6XXXXXXXX" required>
            </div>
          </div>

          <hr class="my-4">
          <h5 class="mb-3">{{ 'Passengers' if current_language=='en' else 'Passagers' }}</h5>
          <div class="row g-2">
            {% for seat in selected_seats %}
            <div class="col-md-6">
              <div class="input-group">
                <span class="input-group-text">#{{ seat }}</span>
                <input type="text" class="form-control" name="passengers" placeholder="{{ 'Passenger name' if current_language=='en' else 'Nom du passager' }}" required>
              </div>
            </div>
            {% endfor %}
          </div>

          <div class="d-flex align-items-center justify-content-between mt-4">
            <div class="fw-bold">{{ 'Total' if current_language=='en' else 'Total' }}: {{ '%.0f'|format(total_amount) }} XAF</div>
            <button type="submit" class="btn btn-primary">
              {{ 'Continue to payment' if current_language=='en' else 'Continuer au paiement' }}
            </button>
          </div>
        </form>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="card p-3">
        <h6 class="mb-2">{{ 'Trip summary' if current_language=='en' else 'Résumé du trajet' }}</h6>
        <div class="small text-secondary">{{ trip.operator.name if trip.operator else '' }} · {{ trip.bus_type.name if trip.bus_type else '' }}</div>
        <div class="small">{{ selected_seats|length }} {{ 'seat(s)' if current_language=='en' else 'place(s)' }}</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
